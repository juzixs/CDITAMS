{% extends 'base.html' %}
{% block title %}部门管理 - 驰达IT资产管理系统{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
<h4>部门管理</h4>
<a href="{% url 'department_create' %}" class="btn btn-primary"><i class="fas fa-plus"></i> 新增部门</a>
</div>
<div class="card"><div class="card-body">
<table class="table"><thead><tr><th>部门名称</th><th>编码</th><th>上级部门</th><th>排序</th><th>操作</th></tr></thead>
<tbody>{% for d in departments %}<tr><td>{{ d.name }}</td><td>{{ d.code }}</td><td>{{ d.parent.name|default:'-' }}</td><td>{{ d.sort }}</td>
<td><a href="{% url 'department_edit' d.id %}" class="btn btn-sm btn-outline-secondary"><i class="fas fa-edit"></i></a>{% if not d.children.exists and not d.users.exists %}<a href="{% url 'department_delete' d.id %}" class="btn btn-sm btn-outline-danger" onclick="return confirm('确定删除？')"><i class="fas fa-trash"></i></a>{% endif %}</td></tr>{% empty %}<tr><td colspan="5" class="text-center">暂无部门</td></tr>{% endfor %}</tbody></table>
</div></div>{% endblock %}
