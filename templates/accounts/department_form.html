{% extends 'base.html' %}
{% block title %}{% if department %}编辑{% else %}新增{% endif %}部门{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4"><h4>{% if department %}编辑{% else %}新增{% endif %}部门</h4></div>
<div class="card"><div class="card-body">
<form method="post">{% csrf_token %}
<div class="row mb-3">
<div class="col-md-6"><label class="form-label">部门名称 <span class="text-danger">*</span></label><input type="text" name="name" class="form-control" value="{{ department.name|default:'' }}" required></div>
<div class="col-md-6"><label class="form-label">部门编码</label><input type="text" name="code" class="form-control" value="{{ department.code|default:'' }}"></div>
</div>
<div class="row mb-3">
<div class="col-md-6"><label class="form-label">上级部门</label><select name="parent" class="form-select"><option value="">顶级部门</option>{% for d in departments %}{% if d.id != department.id %}<option value="{{ d.id }}" {% if department.parent_id == d.id %}selected{% endif %}>{{ d.name }}</option>{% endif %}{% endfor %}</select></div>
<div class="col-md-6"><label class="form-label">排序</label><input type="number" name="sort" class="form-control" value="{{ department.sort|default:0 }}"></div>
</div>
<div class="mb-3"><label class="form-label">描述</label><textarea name="description" class="form-control" rows="2">{{ department.description|default:'' }}</textarea></div>
<div class="mt-4"><button type="submit" class="btn btn-primary">保存</button><a href="{% url 'department_list' %}" class="btn btn-outline-secondary">返回</a></div>
</form></div></div>{% endblock %}
