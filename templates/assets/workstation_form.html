{% extends 'base.html' %}
{% block title %}{% if workstation %}编辑{% else %}新增{% endif %}工位 - 驰达IT资产管理系统{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h4>{% if workstation %}编辑{% else %}新增{% endif %}工位</h4>
</div>
<div class="card">
    <div class="card-body">
        <form method="post">
            {% csrf_token %}
            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label">所属位置 <span class="text-danger">*</span></label>
                    <select name="location_id" class="form-select" required>
                        <option value="">选择位置</option>
                        {% for loc in locations %}
                        <option value="{{ loc.id }}" {% if location.id == loc.id %}selected{% endif %}>{{ loc.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-6">
                    <label class="form-label">工位名称</label>
                    <input type="text" name="name" class="form-control" value="{{ workstation.name|default:'' }}" placeholder="如：A301-01">
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-3">
                    <label class="form-label">X坐标</label>
                    <input type="number" name="x" class="form-control" value="{{ workstation.x|default:'0' }}">
                </div>
                <div class="col-md-3">
                    <label class="form-label">Y坐标</label>
                    <input type="number" name="y" class="form-control" value="{{ workstation.y|default:'0' }}">
                </div>
                <div class="col-md-3">
                    <label class="form-label">宽度</label>
                    <input type="number" name="width" class="form-control" value="{{ workstation.width|default:'30' }}">
                </div>
                <div class="col-md-3">
                    <label class="form-label">高度</label>
                    <input type="number" name="height" class="form-control" value="{{ workstation.height|default:'20' }}">
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label">状态</label>
                    <select name="status" class="form-select">
                        <option value="available" {% if workstation.status == 'available' or not workstation %}selected{% endif %}>可用</option>
                        <option value="occupied" {% if workstation.status == 'occupied' %}selected{% endif %}>已占用</option>
                        <option value="maintenance" {% if workstation.status == 'maintenance' %}selected{% endif %}>维修中</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label class="form-label">描述</label>
                    <textarea name="description" class="form-control" rows="2">{{ workstation.description|default:'' }}</textarea>
                </div>
            </div>
            <div class="mt-4">
                <button type="submit" class="btn btn-primary">保存</button>
                {% if workstation %}
                <a href="{% url 'workstation_list' workstation.location.id %}" class="btn btn-outline-secondary">返回</a>
                {% elif location %}
                <a href="{% url 'workstation_list' location.id %}" class="btn btn-outline-secondary">返回</a>
                {% else %}
                <a href="{% url 'location_list' %}" class="btn btn-outline-secondary">返回</a>
                {% endif %}
            </div>
        </form>
    </div>
</div>
{% endblock %}
