{% extends 'base.html' %}
{% block title %}我的待办 - 驰达IT资产管理系统{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
<h4>我的待办</h4>
<a href="{% url 'todo_create' %}" class="btn btn-primary"><i class="fas fa-plus"></i> 新建待办</a>
</div>
<div class="card"><div class="card-body">
<table class="table table-hover"><thead><tr><th>标题</th><th>类型</th><th>优先级</th><th>状态</th><th>截止时间</th><th>创建时间</th><th>操作</th></tr></thead>
<tbody>{% for t in todos %}<tr><td>{{ t.title }}</td><td>{{ t.get_todo_type_display }}</td>
<td>{% if t.priority == 'high' %}<span class="badge bg-danger">高</span>{% elif t.priority == 'urgent' %}<span class="badge bg-warning">紧急</span>{% else %}<span class="badge bg-info">普通</span>{% endif %}</td>
<td>{% if t.status == 'completed' %}<span class="badge bg-success">已完成</span>{% else %}<span class="badge bg-secondary">待处理</span>{% endif %}</td>
<td>{{ t.due_date|date:"Y-m-d"|default:'-' }}</td><td>{{ t.created_at|date:"Y-m-d" }}</td>
<td>{% if t.status != 'completed' %}<a href="{% url 'todo_complete' t.id %}" class="btn btn-sm btn-success">完成</a>{% endif %}<a href="{% url 'todo_edit' t.id %}" class="btn btn-sm btn-outline-secondary">编辑</a><a href="{% url 'todo_delete' t.id %}" class="btn btn-sm btn-outline-danger" onclick="return confirm('确定删除？')">删除</a></td></tr>{% empty %}<tr><td colspan="7" class="text-center text-muted">暂无待办</td></tr>{% endfor %}</tbody></table>
</div></div>{% endblock %}
